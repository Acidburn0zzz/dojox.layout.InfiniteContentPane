<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>Infinite Content Pane test</title>

	<script type="text/javascript" src='../../../dojo/dojo.js' djConfig='isDebug:true'></script>
	<script type="text/javascript" src="../../../dijit/tests/_testCommon.js"></script>

	<style type="text/css">
		@import "../../../dojo/resources/dojo.css";
		@import "../../../dijit/themes/claro/claro.css";
		@import "../../../dijit/tests/css/dijitTests.css";

		.testpane {
			width: 20em;
			height: 20em;
			border: 1px solid #000;
			overflow: auto;
			display: inline-block;
			margin-right: 1em;
		}
		.testpane p {
			margin-bottom: 12em;
		}
	</style>

	<script type="text/javascript">
		dojo.require("dojo.parser");
		dojo.require("dojox.layout.InfiniteContentPane"); 

		dojo.addOnLoad(function(){
			dojo.parser.parse();
		});

		var fetch_more = {
			fetch: function(count, callback) {
				return dojo.xhrGet({
					url: "extra_content.html",
					load: function(data) {
						callback(data);
					}
				});
			}
		}

		var return_more = {
			fetch: function(count, callback) {
				// Send back some simple generated content
				callback("<p>Send back more data " + count + "</p>");

				// Turn the thing off after we've sent back x amount of replies
				return count < 10;
			}
		}
	</script>

</head>
<body class="claro">
		
		<h1 class="testTitle">dojox.layout.InfiniteContentPane</h1>
		<p>
			Continuous scroll layout pane that fires a event to fetch more data when aproaching either end.
		</p>

		<div class="testpane" data-dojo-type="dojox.layout.InfiniteContentPane" data-dojo-props="fetcher: fetch_more">
			<p>Returns data loaded using an xhrGet.</p>
			<p>Starter content.</p>
			<p>Starter content.</p>
		</div>

		<div class="testpane" data-dojo-type="dojox.layout.InfiniteContentPane" data-dojo-props="fetcher: return_more">
			<p>Returns data generated in the test javascript.</p>
			<p>Starter content.</p>
			<p>Starter content.</p>
		</div>

</body>
</html>
